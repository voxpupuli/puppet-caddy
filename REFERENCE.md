# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`caddy`](#caddy): Main class, includes all other classes.

#### Private Classes

* `caddy::config`: This class handles the Caddy config.
* `caddy::install`: This class handles the Caddy archive.
* `caddy::install::github`: This class handles Caddy installation from Github
* `caddy::install::repo`: This class handles Caddy installation from a package repository
* `caddy::install::site`: This class handles Caddy installation from the official site
* `caddy::service`: This class handles the Caddy service.

### Defined types

* [`caddy::configfile`](#caddy--configfile): This defined type handles a Caddy config file
* [`caddy::vhost`](#caddy--vhost): This defined type handles a Caddy virtual host

### Data types

* [`Caddy::Config`](#Caddy--Config): Caddy config file type
* [`Caddy::VirtualHost`](#Caddy--VirtualHost): Caddy virtual host type

## Classes

### <a name="caddy"></a>`caddy`

Main class, includes all other classes.

#### Examples

##### Basic usage

```puppet
include caddy
```

##### Install customized version of Caddy from the official site

```puppet
class { 'caddy':
  caddy_features => 'http.git,http.filter,http.ipfilter',
}
```

##### Install specific version of Caddy

```puppet
class { 'caddy':
  version        => '2.0.0',
  install_method => 'github',
}
```

#### Parameters

The following parameters are available in the `caddy` class:

* [`version`](#-caddy--version)
* [`install_method`](#-caddy--install_method)
* [`install_path`](#-caddy--install_path)
* [`manage_user`](#-caddy--manage_user)
* [`caddy_user`](#-caddy--caddy_user)
* [`manage_group`](#-caddy--manage_group)
* [`caddy_group`](#-caddy--caddy_group)
* [`caddy_shell`](#-caddy--caddy_shell)
* [`caddy_log_dir`](#-caddy--caddy_log_dir)
* [`caddy_home`](#-caddy--caddy_home)
* [`caddy_ssl_dir`](#-caddy--caddy_ssl_dir)
* [`caddy_license`](#-caddy--caddy_license)
* [`caddy_telemetry`](#-caddy--caddy_telemetry)
* [`caddy_features`](#-caddy--caddy_features)
* [`caddy_architecture`](#-caddy--caddy_architecture)
* [`caddy_account_id`](#-caddy--caddy_account_id)
* [`caddy_api_key`](#-caddy--caddy_api_key)
* [`manage_systemd_unit`](#-caddy--manage_systemd_unit)
* [`systemd_limit_processes`](#-caddy--systemd_limit_processes)
* [`systemd_private_devices`](#-caddy--systemd_private_devices)
* [`systemd_capability_bounding_set`](#-caddy--systemd_capability_bounding_set)
* [`systemd_ambient_capabilities`](#-caddy--systemd_ambient_capabilities)
* [`systemd_no_new_privileges`](#-caddy--systemd_no_new_privileges)
* [`manage_service`](#-caddy--manage_service)
* [`service_name`](#-caddy--service_name)
* [`service_ensure`](#-caddy--service_ensure)
* [`service_enable`](#-caddy--service_enable)
* [`manage_repo`](#-caddy--manage_repo)
* [`repo_settings`](#-caddy--repo_settings)
* [`package_name`](#-caddy--package_name)
* [`package_ensure`](#-caddy--package_ensure)
* [`manage_caddyfile`](#-caddy--manage_caddyfile)
* [`caddyfile_source`](#-caddy--caddyfile_source)
* [`caddyfile_content`](#-caddy--caddyfile_content)
* [`config_file_extension`](#-caddy--config_file_extension)
* [`config_dir`](#-caddy--config_dir)
* [`purge_config_dir`](#-caddy--purge_config_dir)
* [`config_enable_dir`](#-caddy--config_enable_dir)
* [`purge_config_enable_dir`](#-caddy--purge_config_enable_dir)
* [`config_files`](#-caddy--config_files)
* [`vhost_dir`](#-caddy--vhost_dir)
* [`purge_vhost_dir`](#-caddy--purge_vhost_dir)
* [`vhost_enable_dir`](#-caddy--vhost_enable_dir)
* [`purge_vhost_enable_dir`](#-caddy--purge_vhost_enable_dir)
* [`vhosts`](#-caddy--vhosts)

##### <a name="-caddy--version"></a>`version`

Data type: `Optional[String[1]]`

Which version of caddy to install when install_method is github.
Must not be set otherwise.

Default value: `undef`

##### <a name="-caddy--install_method"></a>`install_method`

Data type: `Enum['github', 'repo', 'site']`

Which source to use for the Caddy installation. See https://caddyserver.com/docs/install.
* `github` - download from Github releases (version must be set in this case)
* `repo` - install from an OS repository
* `site` (default) - download from the official Caddy site

Default value: `'site'`

##### <a name="-caddy--install_path"></a>`install_path`

Data type: `Stdlib::Absolutepath`

Directory where the Caddy binary is stored. Not used when $install_method is 'repo'.

Default value: `'/opt/caddy'`

##### <a name="-caddy--manage_user"></a>`manage_user`

Data type: `Boolean`

Whether or not the module should create the user.

Default value: `true`

##### <a name="-caddy--caddy_user"></a>`caddy_user`

Data type: `String[1]`

The user used by the Caddy process.

Default value: `'caddy'`

##### <a name="-caddy--manage_group"></a>`manage_group`

Data type: `Boolean`

Whether or not the module should create the group.

Default value: `true`

##### <a name="-caddy--caddy_group"></a>`caddy_group`

Data type: `String[1]`

The group used by the Caddy process.

Default value: `'caddy'`

##### <a name="-caddy--caddy_shell"></a>`caddy_shell`

Data type: `Stdlib::Absolutepath`

Which shell is used.

Default value: `'/sbin/nologin'`

##### <a name="-caddy--caddy_log_dir"></a>`caddy_log_dir`

Data type: `Stdlib::Absolutepath`

Directory where the log files are stored.

Default value: `'/var/log/caddy'`

##### <a name="-caddy--caddy_home"></a>`caddy_home`

Data type: `Stdlib::Absolutepath`

Directory where the Caddy data is stored.

Default value: `'/var/lib/caddy'`

##### <a name="-caddy--caddy_ssl_dir"></a>`caddy_ssl_dir`

Data type: `Stdlib::Absolutepath`

Directory where Let's Encrypt certificates are stored.

Default value: `'/etc/ssl/caddy'`

##### <a name="-caddy--caddy_license"></a>`caddy_license`

Data type: `Enum['personal', 'commercial']`

Whether a personal or commercial license is used.

Default value: `'personal'`

##### <a name="-caddy--caddy_telemetry"></a>`caddy_telemetry`

Data type: `Enum['on', 'off']`

Whether telemetry data should be collected.

Default value: `'off'`

##### <a name="-caddy--caddy_features"></a>`caddy_features`

Data type: `String[1]`

A list of features the Caddy binary should support.

Default value: `'http.git,http.filter,http.ipfilter'`

##### <a name="-caddy--caddy_architecture"></a>`caddy_architecture`

Data type: `String[1]`

A temporary variable, required for the download URL.

Default value: `$facts['os']['architecture']`

##### <a name="-caddy--caddy_account_id"></a>`caddy_account_id`

Data type: `Optional[String[1]]`

The account ID, required for the commercial license.

Default value: `undef`

##### <a name="-caddy--caddy_api_key"></a>`caddy_api_key`

Data type: `Optional[String[1]]`

The API key, required for the commercial license.

Default value: `undef`

##### <a name="-caddy--manage_systemd_unit"></a>`manage_systemd_unit`

Data type: `Boolean`

Whether or not the module should create the systemd unit file.

Default value: `true`

##### <a name="-caddy--systemd_limit_processes"></a>`systemd_limit_processes`

Data type: `Integer[0]`

The number of processes.

Default value: `64`

##### <a name="-caddy--systemd_private_devices"></a>`systemd_private_devices`

Data type: `Boolean`

Whether the process has access to physical devices.

Default value: `true`

##### <a name="-caddy--systemd_capability_bounding_set"></a>`systemd_capability_bounding_set`

Data type: `Optional[String[1]]`

Controls which capabilities to include in the capability bounding set for the executed process.

Default value: `undef`

##### <a name="-caddy--systemd_ambient_capabilities"></a>`systemd_ambient_capabilities`

Data type: `String[1]`

Controls which capabilities to include in the ambient capability set for the executed process.

Default value: `'CAP_NET_BIND_SERVICE'`

##### <a name="-caddy--systemd_no_new_privileges"></a>`systemd_no_new_privileges`

Data type: `Optional[Boolean]`

Whether the process and all its children can gain new privileges through execve().

Default value: `undef`

##### <a name="-caddy--manage_service"></a>`manage_service`

Data type: `Boolean`

Whether or not the module should manage the service.

Default value: `true`

##### <a name="-caddy--service_name"></a>`service_name`

Data type: `String[1]`

Customize the name of the system service.

Default value: `'caddy'`

##### <a name="-caddy--service_ensure"></a>`service_ensure`

Data type: `Stdlib::Ensure::Service`

Whether the service should be running or stopped.

Default value: `'running'`

##### <a name="-caddy--service_enable"></a>`service_enable`

Data type: `Boolean`

Whether the service should be enabled or disabled.

Default value: `true`

##### <a name="-caddy--manage_repo"></a>`manage_repo`

Data type: `Boolean`

Whether the APT/YUM(COPR) repository should be installed. Only relevant when $install_method is 'repo'.

Default value: `true`

##### <a name="-caddy--repo_settings"></a>`repo_settings`

Data type: `Hash[String[1],Any]`

Distro-specific repository settings.

Default value: `{}`

##### <a name="-caddy--package_name"></a>`package_name`

Data type: `String[1]`

Name of the caddy package to use. Only relevant when $install_method is 'repo'.

Default value: `'caddy'`

##### <a name="-caddy--package_ensure"></a>`package_ensure`

Data type: `Optional[String[1]]`

Whether to install or remove the caddy package. Only relevant when $install_method is 'repo'.

Default value: `undef`

##### <a name="-caddy--manage_caddyfile"></a>`manage_caddyfile`

Data type: `Boolean`

Whether to manage Caddyfile.

Default value: `true`

##### <a name="-caddy--caddyfile_source"></a>`caddyfile_source`

Data type: `Optional[Stdlib::Filesource]`

Caddyfile source.

Default value: `undef`

##### <a name="-caddy--caddyfile_content"></a>`caddyfile_content`

Data type: `Optional[String[1]]`

Caddyfile content.

Default value: `undef`

##### <a name="-caddy--config_file_extension"></a>`config_file_extension`

Data type: `Variant[Enum[''], Pattern[/^\./]]`

Default extension for config and virtual host files (must include leading `.`)

Default value: `'.conf'`

##### <a name="-caddy--config_dir"></a>`config_dir`

Data type: `Stdlib::Absolutepath`

Where to store Caddy configs.
Set this to /etc/caddy/conf-available to simulate nginx/apache behavior
(see config_enable_dir also).

Default value: `'/etc/caddy/config'`

##### <a name="-caddy--purge_config_dir"></a>`purge_config_dir`

Data type: `Boolean`

Whether to purge Caddy config directory.

Default value: `true`

##### <a name="-caddy--config_enable_dir"></a>`config_enable_dir`

Data type: `Optional[Stdlib::Absolutepath]`

Where to load Caddy configs from. Set this parameter to /etc/caddy/conf-enabled
to simulate nginx/apache behavior.

Default value: `undef`

##### <a name="-caddy--purge_config_enable_dir"></a>`purge_config_enable_dir`

Data type: `Boolean`

Whether to purge Caddy enabled config directory.

Default value: `$purge_config_dir`

##### <a name="-caddy--config_files"></a>`config_files`

Data type: `Hash[String[1], Caddy::Config]`

Hash of config files to create.

Default value: `{}`

##### <a name="-caddy--vhost_dir"></a>`vhost_dir`

Data type: `Stdlib::Absolutepath`

Where to store Caddy available virtual host configs. Set this to
/etc/caddy/vhost.d if you'd prefer to keep virtual hosts separated from
configs.
Set this to /etc/caddy/sites-available to simulate nginx/apache behavior
(see vhost_enable_dir also).

Default value: `'/etc/caddy/config'`

##### <a name="-caddy--purge_vhost_dir"></a>`purge_vhost_dir`

Data type: `Boolean`

Whether to purge Caddy available virtual host directory.

Default value: `$purge_config_dir`

##### <a name="-caddy--vhost_enable_dir"></a>`vhost_enable_dir`

Data type: `Optional[Stdlib::Absolutepath]`

Where to load Caddy virtual host configs from. Set this parameter to /etc/caddy/sites-enabled
to simulate nginx/apache behavior.

Default value: `undef`

##### <a name="-caddy--purge_vhost_enable_dir"></a>`purge_vhost_enable_dir`

Data type: `Boolean`

Whether to purge Caddy enabled virtual host directory.

Default value: `$purge_vhost_dir`

##### <a name="-caddy--vhosts"></a>`vhosts`

Data type: `Hash[String[1], Caddy::VirtualHost]`

Hash of virtual hosts to create.

Default value: `{}`

## Defined types

### <a name="caddy--configfile"></a>`caddy::configfile`

This defined type handles a Caddy config file

#### Examples

##### Configure Caddy logging

```puppet
caddy::configfile { 'subdomain-log':
  source => 'puppet:///modules/caddy/etc/caddy/config/logging.conf',
}
```

##### Same as above but using content

```puppet
$log_config = @(SUBDOMAIN_LOG)
  (subdomain-log) {
    log {
      hostnames {args[0]}
      output file /var/log/caddy/{args[0]}.log
    }
  }
  | SUBDOMAIN_LOG

caddy::configfile { 'subdomain-log':
  content => $log_config,
}
```

#### Parameters

The following parameters are available in the `caddy::configfile` defined type:

* [`ensure`](#-caddy--configfile--ensure)
* [`source`](#-caddy--configfile--source)
* [`content`](#-caddy--configfile--content)
* [`config_dir`](#-caddy--configfile--config_dir)
* [`enable_dir`](#-caddy--configfile--enable_dir)
* [`file_extension`](#-caddy--configfile--file_extension)

##### <a name="-caddy--configfile--ensure"></a>`ensure`

Data type: `Enum['present','enabled','disabled','absent']`

Make the config file either present (same as disabled), enabled, disabled or absent.

Default value: `'enabled'`

##### <a name="-caddy--configfile--source"></a>`source`

Data type: `Optional[Stdlib::Filesource]`

Source (path) for the caddy config file.

Default value: `undef`

##### <a name="-caddy--configfile--content"></a>`content`

Data type: `Optional[String]`

String with the caddy config file.

Default value: `undef`

##### <a name="-caddy--configfile--config_dir"></a>`config_dir`

Data type: `Stdlib::Absolutepath`

Where to store the config file.

Default value: `$caddy::config_dir`

##### <a name="-caddy--configfile--enable_dir"></a>`enable_dir`

Data type: `Optional[Stdlib::Absolutepath]`

Directory to symlink the config config file into (conf-enabled e.g.) if any.

Default value: `$caddy::config_enable_dir`

##### <a name="-caddy--configfile--file_extension"></a>`file_extension`

Data type: `Variant[Enum[''], Pattern[/^\./]]`

Default extension for the config file (must include leading `.`)

Default value: `$caddy::config_file_extension`

### <a name="caddy--vhost"></a>`caddy::vhost`

This defined type handles a Caddy virtual host

#### Examples

##### Configure virtual host, based on source

```puppet
caddy::vhost { 'example1':
  source => 'puppet:///modules/caddy/etc/caddy/config/example1.conf',
}
```

##### Configure virtual host, based on content

```puppet
caddy::vhost { 'example2:
  content => 'localhost:2015',
}
```

#### Parameters

The following parameters are available in the `caddy::vhost` defined type:

* [`ensure`](#-caddy--vhost--ensure)
* [`source`](#-caddy--vhost--source)
* [`content`](#-caddy--vhost--content)
* [`config_dir`](#-caddy--vhost--config_dir)
* [`enable_dir`](#-caddy--vhost--enable_dir)
* [`file_extension`](#-caddy--vhost--file_extension)

##### <a name="-caddy--vhost--ensure"></a>`ensure`

Data type: `Enum['present','enabled','disabled','absent']`

Make the vhost either present (same as disabled), enabled, disabled or absent.

Default value: `'enabled'`

##### <a name="-caddy--vhost--source"></a>`source`

Data type: `Optional[Stdlib::Filesource]`

Source (path) for the caddy vhost configuration.

Default value: `undef`

##### <a name="-caddy--vhost--content"></a>`content`

Data type: `Optional[String]`

String with the caddy vhost configuration.

Default value: `undef`

##### <a name="-caddy--vhost--config_dir"></a>`config_dir`

Data type: `Stdlib::Absolutepath`

Where to store the vhost config file.

Default value: `$caddy::vhost_dir`

##### <a name="-caddy--vhost--enable_dir"></a>`enable_dir`

Data type: `Optional[Stdlib::Absolutepath]`

Directory to symlink the vhost config file into (sites-enabled e.g.) if any.

Default value: `$caddy::vhost_enable_dir`

##### <a name="-caddy--vhost--file_extension"></a>`file_extension`

Data type: `Variant[Enum[''], Pattern[/^\./]]`

Default extension for the vhost config file (must include leading `.`)

Default value: `$caddy::config_file_extension`

## Data types

### <a name="Caddy--Config"></a>`Caddy::Config`

Caddy config file type

Alias of

```puppet
Struct[{
  ensure => Optional[Enum['present','enabled','disabled','absent']],
  source => Optional[Stdlib::Filesource],
  content => Optional[String[1]],
}]
```

### <a name="Caddy--VirtualHost"></a>`Caddy::VirtualHost`

Caddy virtual host type

Alias of

```puppet
Struct[{
  ensure => Optional[Enum['present','enabled','disabled','absent']],
  source => Optional[Stdlib::Filesource],
  content => Optional[String[1]],
}]
```

